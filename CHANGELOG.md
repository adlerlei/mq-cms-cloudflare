# 工作日誌 / Changelog

## [4.7.0] - 2025-7-13

### 🎉 完整功能版本發布

#### ✨ 新增功能 (Added)
- **完整的內容管理系統**
  - 媒體檔案上傳、管理和刪除功能
  - 支援圖片格式：JPG, PNG, GIF, WebP
  - 支援影片格式：MP4, WebM, MOV, AVI
  - 自動生成縮圖預覽

- **輪播群組管理**
  - 創建和管理輪播圖片群組
  - 群組內圖片拖拽排序功能
  - 多張圖片批量上傳到群組
  - 群組圖片的增刪改查

- **區塊內容指派系統**
  - 6個顯示區塊：頁首、四個中間輪播區、頁尾
  - 單一媒體指派功能
  - 輪播群組指派功能
  - **偏移量功能**：可設定輪播從第幾張圖片開始播放

- **即時更新機制**
  - WebSocket 即時通訊
  - 管理後台變更立即反映到顯示頁面
  - 自動重新載入內容

- **全局設定管理**
  - 可調整各區塊的輪播間隔時間
  - 頁首、中間輪播、頁尾區塊獨立設定

- **用戶界面**
  - 響應式管理後台 (admin.html)
  - 全螢幕顯示頁面 (display.html)
  - 簡潔的登入頁面 (login.html)
  - 使用 Bulma CSS 框架

#### 🔧 技術實現 (Technical)
- **後端架構**
  - Cloudflare Workers + TypeScript
  - Durable Objects 狀態管理
  - R2 Storage 媒體檔案儲存
  - itty-router 路由管理

- **前端技術**
  - 原生 JavaScript (ES6+)
  - WebSocket 即時通訊
  - 拖拽排序 (HTML5 Drag & Drop API)
  - 響應式設計

- **API 設計**
  - RESTful API 架構
  - 完整的 CRUD 操作
  - 檔案上傳和管理
  - 即時廣播機制

#### 🛠️ 主要修復 (Fixed)
- **輪播群組圖片管理**
  - 修復圖片上傳後無法顯示的問題
  - 修復上傳按鈕無法點擊的問題
  - 實現圖片上傳後立即顯示功能

- **拖拽排序功能**
  - 完整實現圖片拖拽排序
  - 添加視覺反饋和動畫效果
  - 修復拖拽邏輯和事件處理

- **偏移量功能**
  - 修復偏移量設定無效的問題
  - 在前端輪播邏輯中正確應用偏移量
  - 添加偏移量狀態顯示

- **群組刪除機制**
  - 實現群組刪除時同時刪除內部所有圖片
  - 從 R2 儲存桶和數據庫中完全清除
  - 避免殘留未指派的圖片

- **UI/UX 改善**
  - 將刪除按鈕圖標改為文字「刪除」
  - 移除不必要的「所有可用圖片」區塊
  - 改善媒體庫顯示格式，群組顯示為「群組名稱(圖片數量)」
  - 添加操作提示和確認對話框

#### 🔐 安全性 (Security)
- 基本的 JWT 認證機制
- 檔案類型驗證
- 用戶權限控制

#### 📚 文檔 (Documentation)
- 完整的 README.md 說明文檔
- API 使用說明
- 部署指南
- 開發環境設定說明

---

## 版本說明

### 語義化版本控制
本專案遵循 [語義化版本控制](https://semver.org/lang/zh-TW/) 規範：
- **主版本號**：不相容的 API 修改
- **次版本號**：向下相容的功能性新增
- **修訂版本號**：向下相容的問題修正

### 版本標籤說明
- 🎉 **重大發布**：主要版本或里程碑
- ✨ **新增功能**：新功能或特性
- 🔧 **技術改進**：技術實現或架構改善
- 🛠️ **問題修復**：錯誤修正或功能修復
- 🔐 **安全性**：安全相關的更新
- 📚 **文檔**：文檔更新或改善
- ⚡ **性能**：性能優化
- 🎨 **UI/UX**：用戶界面或體驗改善